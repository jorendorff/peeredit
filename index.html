<!doctype html>
<html>
  <head>
    <title>peeredit - conflict-free collaborative editing</title>
    <style>
      #editor { 
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      }
    </style>
  </head>
  <body>
    <div id="editor"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/mode-javascript.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/theme-monokai.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="lib/rga.js"></script>
    <script>
      $(function (event) {
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");  // monokai, ambiance, solarized_dark, tomorrow_night
        editor.getSession().setMode("ace/mode/javascript");

        var socket = io();
        var rga;
        socket.on("welcome", function (event) {
          rga = new RGA(event.id, event.history);
          RGA.tieToSocket(rga, socket);
          RGA.tieToAceEditor(rga, editor);
        });
      });
    </script>
  </body>
</html>

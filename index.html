<!doctype html>
<html>
  <head>
    <title>peeredit - conflict-free collaborative editing</title>
    <style>
      #editor { 
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        font-family: monospace;
        font-size: 180%;
      }
    </style>
    <link rel="stylesheet" type="text/css" href="slow.io/slow.io.css">
  </head>
  <body>
    <div id="editor"></div>
    <script src="https://cdn.quilljs.com/0.20.0/quill.js"></script>
<!--
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/mode-javascript.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/theme-monokai.js"></script>
-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/slow.io/slow.io.js"></script>
    <script src="lib/rga.js"></script>
    <script>
      "use strict";

      $(function (event) {
        //var editor = ace.edit("editor");
        //editor.setTheme("ace/theme/monokai");  // monokai, ambiance, solarized_dark, tomorrow_night
        //editor.getSession().setMode("ace/mode/javascript");
        var quill = new Quill("#editor");

        var socket = io();
        var rga;
        socket.on("welcome", function (event) {
          rga = new RGA(event.id, event.history);
          RGA.tieToSocket(rga, socket);

          quill.setText(rga.text());
          console.log(uneval(quill.getText()));
          RGA.tieToQuillEditor(rga, quill);
          quill.focus();
        });
      });
    </script>
  </body>
</html>
